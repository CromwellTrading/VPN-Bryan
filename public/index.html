<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VPN Cuba - Aceptar T√©rminos</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <div class="logo-glow"></div>
                <h1>VPN CUBA</h1>
            </div>
            <p class="subtitle">Para continuar, acepta nuestros t√©rminos</p>
        </div>
        
        <div class="terms-container">
            <!-- T√©rminos de Uso -->
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(1)">
                    <div class="accordion-icon">üìÑ</div>
                    <div class="accordion-title">T√©rminos de Uso</div>
                    <div class="accordion-arrow" id="arrow1">‚ñº</div>
                </div>
                <div class="accordion-content" id="content1">
                    <div class="terms-content">
                        <h3>√öltima actualizaci√≥n: Noviembre de 2025</h3>
                        <p>Al adquirir y utilizar los servicios de VPN Cuba, usted (el "Cliente") acepta y se compromete a cumplir con los siguientes T√©rminos y Condiciones.</p>
                        
                        <h4>1. Responsabilidad del Cliente</h4>
                        <p><strong>1.1. Cumplimiento Legal:</strong> El Cliente es el √∫nico responsable de conocer y cumplir con todas las leyes y regulaciones locales, nacionales e internacionales aplicables en su ubicaci√≥n al utilizar el servicio.</p>
                        <p><strong>1.2. Uso Legal:</strong> El servicio VPN Cuba debe ser utilizado exclusivamente con fines l√≠citos. El uso del servicio para cualquier actividad ilegal, fraudulenta o abusiva est√° estrictamente prohibido y ser√° motivo de suspensi√≥n o cancelaci√≥n inmediata.</p>
                        <p><strong>1.3. Datos de Cuenta:</strong> El Cliente es responsable de mantener la confidencialidad de su archivo de configuraci√≥n (llave privada) y de su cuenta.</p>
                        
                        <h4>2. Uso Aceptable del Servicio (Prohibiciones)</h4>
                        <p>Para garantizar la estabilidad y baja latencia para todos, el Cliente se compromete a NO utilizar el servicio para las siguientes actividades:</p>
                        <ul>
                            <li><strong>Actividades Ilegales:</strong> Distribuci√≥n o acceso a material ilegal, pirater√≠a (incluyendo torrents de contenido con derechos de autor), phishing, o cualquier forma de ciberdelincuencia.</li>
                            <li><strong>Ataques a la Red:</strong> Intentos de interrupci√≥n, hackeo o explotaci√≥n de sistemas inform√°ticos ajenos (incluyendo ataques DDoS, escaneo de puertos o spam).</li>
                            <li><strong>Abuso de Ancho de Banda:</strong> Uso excesivo y continuo que degrade significativamente el rendimiento del servidor para otros usuarios (ej. miner√≠a de criptomonedas o descargas masivas 24/7).</li>
                            <li><strong>Compartici√≥n No Autorizada:</strong> Compartir el archivo de configuraci√≥n con terceros. Cada cuenta est√° destinada a un uso personal o familiar limitado.</li>
                        </ul>
                        
                        <h4>3. Exclusi√≥n de Garant√≠as y Limitaci√≥n de Responsabilidad</h4>
                        <p><strong>3.1. Rendimiento:</strong> Aunque VPN Cuba se esfuerza por ofrecer la mejor latencia y estabilidad, no garantiza que el servicio sea ininterrumpido, est√© libre de errores o que el rendimiento del ping sea el mismo en todas las ubicaciones y momentos. El rendimiento puede variar debido a factores fuera de nuestro control.</p>
                        <p><strong>3.2. Interrupci√≥n de Servicio:</strong> VPN Cuba puede realizar mantenimiento o experimentar fallas imprevistas. El Cliente acepta que no habr√° reembolso o compensaci√≥n por la interrupci√≥n temporal del servicio.</p>
                        
                        <h4>4. Suspensi√≥n y Terminaci√≥n</h4>
                        <p><strong>4.1. Violaci√≥n:</strong> VPN Cuba se reserva el derecho de suspender o terminar inmediatamente el servicio de cualquier Cliente que viole estos T√©rminos de Servicio o nuestra Pol√≠tica de Uso Aceptable, sin previo aviso ni reembolso.</p>
                    </div>
                </div>
                <div class="accordion-checkbox">
                    <label class="checkbox-label">
                        <input type="checkbox" id="check1" onchange="checkAll()">
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-text">He le√≠do y acepto los T√©rminos de Uso</span>
                    </label>
                </div>
            </div>
            
            <!-- Pol√≠tica de Reembolso -->
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(2)">
                    <div class="accordion-icon">üí∞</div>
                    <div class="accordion-title">Pol√≠tica de Reembolso</div>
                    <div class="accordion-arrow" id="arrow2">‚ñº</div>
                </div>
                <div class="accordion-content" id="content2">
                    <div class="terms-content">
                        <h3>√öltima actualizaci√≥n: Noviembre de 2025</h3>
                        <p>En VPN Cuba, estamos seguros de ofrecer la mejor conexi√≥n de baja latencia para tu experiencia gamer. Si por alguna raz√≥n t√©cnica nuestro servicio no cumple con lo prometido, ofrecemos una garant√≠a clara:</p>
                        
                        <h4>1. Garant√≠a de Devoluci√≥n de Dinero (7 D√≠as)</h4>
                        <p>Ofrecemos una Garant√≠a de Devoluci√≥n de Dinero de 7 D√≠as (siete d√≠as naturales) a partir de la fecha de la compra inicial del plan.</p>
                        <p>Si no est√°s satisfecho con la calidad, velocidad, o estabilidad de la conexi√≥n durante este periodo de 7 d√≠as, puedes solicitar un reembolso completo.</p>
                        <p>Esta garant√≠a solo aplica a la primera compra de un cliente. Las renovaciones o compras posteriores no son elegibles.</p>
                        
                        <h4>2. Condiciones Espec√≠ficas para el Reembolso</h4>
                        <p>Para solicitar un reembolso dentro del periodo de 7 d√≠as, el cliente debe cumplir con las siguientes condiciones:</p>
                        <ul>
                            <li><strong>Motivo T√©cnico:</strong> La solicitud debe estar basada en un problema t√©cnico no resuelto relacionado con la incapacidad de conectar o una latencia (ping) inusualmente alta que el equipo de soporte no pudo solucionar.</li>
                            <li><strong>Nota:</strong> Las velocidades o latencias que sean consistentes con las limitaciones de la conexi√≥n local del cliente no son motivo de reembolso.</li>
                            <li><strong>Cumplimiento de T√©rminos:</strong> El Cliente no debe haber violado nuestros T√©rminos de Servicio (ej. no haber compartido la clave, no haber realizado abuso de ancho de banda o actividades ilegales).</li>
                        </ul>
                    </div>
                </div>
                <div class="accordion-checkbox">
                    <label class="checkbox-label">
                        <input type="checkbox" id="check2" onchange="checkAll()">
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-text">He le√≠do y acepto la Pol√≠tica de Reembolso</span>
                    </label>
                </div>
            </div>
            
            <!-- Pol√≠tica de Privacidad -->
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(3)">
                    <div class="accordion-icon">üîí</div>
                    <div class="accordion-title">Pol√≠tica de Privacidad</div>
                    <div class="accordion-arrow" id="arrow3">‚ñº</div>
                </div>
                <div class="accordion-content" id="content3">
                    <div class="terms-content">
                        <h3>√öltima actualizaci√≥n: Noviembre de 2025</h3>
                        <p>En VPN Cuba, tu privacidad y seguridad son nuestra m√°xima prioridad. Operamos bajo una estricta pol√≠tica de Cero Registros (No-Logs Policy) dise√±ada para asegurar que tu actividad en l√≠nea permanezca completamente privada.</p>
                        
                        <h4>1. Nuestro Compromiso: Cero Registros de Actividad</h4>
                        <p>VPN Cuba NO registra, almacena ni monitorea la actividad de nuestros usuarios.</p>
                        <p>No registramos:</p>
                        <ul>
                            <li>Tu actividad de navegaci√≥n, historial de sitios web visitados o el contenido de tus comunicaciones.</li>
                            <li>Registros de tr√°fico (qu√© datos se env√≠an o reciben).</li>
                            <li>Registros de DNS (solicitudes a sitios web).</li>
                            <li>Tu direcci√≥n IP real (externa) ni la direcci√≥n IP asignada por nuestra VPN.</li>
                        </ul>
                    </div>
                </div>
                <div class="accordion-checkbox">
                    <label class="checkbox-label">
                        <input type="checkbox" id="check3" onchange="checkAll()">
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-text">He le√≠do y acepto la Pol√≠tica de Privacidad</span>
                    </label>
                </div>
            </div>
        </div>
        
        <button id="continueBtn" class="btn-primary" disabled onclick="acceptTerms()">
            <span class="btn-icon">üöÄ</span>
            <span class="btn-text">Continuar a los Planes</span>
            <div class="btn-glow"></div>
        </button>
        
        <div class="footer">
            <p class="footer-text">¬© 2025 VPN Cuba. Todos los derechos reservados.</p>
        </div>
    </div>

    <script>
        // Inicializar Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.hide();
        
        // Obtener par√°metros de la URL
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('userId') || tg.initDataUnsafe.user?.id;
        
        // Acorde√≥n para t√©rminos
        function toggleAccordion(num) {
            const content = document.getElementById(`content${num}`);
            const arrow = document.getElementById(`arrow${num}`);
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                arrow.textContent = '‚ñº';
            } else {
                content.classList.add('expanded');
                arrow.textContent = '‚ñ≤';
            }
        }
        
        // Verificar si todos los checkboxes est√°n marcados
        function checkAll() {
            const check1 = document.getElementById('check1').checked;
            const check2 = document.getElementById('check2').checked;
            const check3 = document.getElementById('check3').checked;
            const btn = document.getElementById('continueBtn');
            
            btn.disabled = !(check1 && check2 && check3);
        }
        
        // Funci√≥n para aceptar t√©rminos y redirigir a planes
        async function acceptTerms() {
            const btn = document.getElementById('continueBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="btn-icon">‚è≥</span><span class="btn-text">Procesando...</span>';
            
            try {
                // Guardar aceptaci√≥n en el backend
                const response = await fetch('/api/accept-terms', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        telegramId: userId,
                        username: tg.initDataUnsafe.user?.username,
                        firstName: tg.initDataUnsafe.user?.first_name
                    })
                });
                
                if (response.ok) {
                    // Redirigir a la p√°gina de planes
                    window.location.href = `/plans.html?userId=${userId}`;
                } else {
                    throw new Error('Error al guardar la aceptaci√≥n');
                }
            } catch (error) {
                alert('Error al guardar la aceptaci√≥n. Por favor, intenta de nuevo.');
                btn.disabled = false;
                btn.innerHTML = '<span class="btn-icon">üöÄ</span><span class="btn-text">Continuar a los Planes</span>';
            }
        }
        
        // Si no hay userId, intentar obtenerlo de Telegram
        if (!userId && tg.initDataUnsafe.user) {
            const url = new URL(window.location);
            url.searchParams.set('userId', tg.initDataUnsafe.user.id);
            window.history.replaceState({}, '', url);
        }
    </script>
</body>
</html>
